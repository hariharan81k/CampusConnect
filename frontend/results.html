<!DOCTYPE html>
<html>
<head>
    <title>My Results</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="page">
    <h2>My Results</h2>

    <table id="resultsTable">
        <tr>
            <th>Subject</th>
            <th>Marks</th>
            <th>Grade</th>
        </tr>
    </table>
</div>

<script src="script.js"></script>
<script>
    // ðŸ” Login check
const userid = localStorage.getItem("userid");

if (!userid) {
    alert("Please login first");
    window.location.href = "index.html";
}

// ðŸ“¡ Fetch results from Java backend
fetch(`http://localhost:8080/api/student/results/${userid}`)
    .then(response => response.json())
    .then(data => {
        const tbody = document.getElementById("resultsBody");
        tbody.innerHTML = "";

        if (data.length === 0) {
            tbody.innerHTML = "<tr><td colspan='2'>No results found</td></tr>";
            return;
        }

        data.forEach(item => {
            const row = `
                <tr>
                    <td>${item.subject}</td>
                    <td>${item.marks}</td>
                </tr>
            `;
            tbody.innerHTML += row;
        });
    })
    .catch(error => {
        console.error(error);
        alert("Failed to load results");
    });

</script>

</body>
</html>
